"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57492],{24699:function(e,t,n){n.d(t,{K:function(){return a},Z:function(){return i}});var r=n(11987),i=function(){var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,r.format)({pathname:e})}},a=function(){var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,r.format)({pathname:e})}}},57492:function(e,t,n){n.d(t,{r:function(){return Z}});var r=n(50029),i=n(87794),a=n.n(i),s=n(67294),o=n(98108),c=n(294),u=n(59611),l=n(96747),d=n(59499),p=n(4730),f=n(5152),m=n(73213),v=n(85893),b=["isOpen"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=(0,f.default)((function(){return Promise.all([n.e(98940),n.e(94928),n.e(41274),n.e(44497),n.e(65092)]).then(n.bind(n,86216)).then((function(e){return e.CompLicensingDialog}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[86216]}}}),y=function(e){var t=e.isOpen,n=(0,p.Z)(e,b);return(0,m.B)(t)&&(0,v.jsx)(O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},h=["isOpen"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=(0,f.default)((function(){return Promise.all([n.e(98940),n.e(49278),n.e(80158),n.e(49242),n.e(47262)]).then(n.bind(n,12512)).then((function(e){return e.CompLicensingDrawer}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[12512]}}}),w=function(e){var t=e.isOpen,n=(0,p.Z)(e,h);return(0,m.B)(t)&&(0,v.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},S=["isOpen"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=(0,f.default)((function(){return n.e(81211).then(n.bind(n,81211)).then((function(e){return e.CompLicensingSnackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[81211]}}}),k=function(e){var t=e.isOpen,n=(0,p.Z)(e,S);return(0,m.B)(t)&&(0,v.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},D=n(43267),I=n(68889),x=n(2397),E=function(e){var t=e.assets,n=e.compLicensingHandler,r=e.isDialogOpen,i=e.isDrawerOpen,a=e.isLicensing,s=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,d=e.selectedAssetSize,p=e.setSelectedAssetSize,f=e.settingsData,m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).licensingError,t=void 0===e?{}:e,n=(0,D.$G)(x.clK).t;return{cancel:n("common:actions_cancel"),downloadComp:n("common:actions_download_comp"),enterpriseCompLicense:n("ent:license_enterprise_comp"),genericErrorMessage:n("ent:license_now_error_message"),licensingError:(0,I.j2)({error:t,t:n}),licenseSuccess:n("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:n("common:actions_download_comp"),disclaimer:(0,v.jsx)(D.cC,{i18nKey:"ent:comp_disclaimer",ns:x.clK,components:{bold:(0,v.jsx)("strong",{})}}),metadataFound:n("ent:previous_metadata_found_comp"),metadataMissing:n("ent:previous_metadata_missing_comp"),title:n("ent:add_metadata_to_comp")}}}({licensingError:o});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{assets:t,isOpen:r,onClose:c,onLicense:n,labels:m,isLicensing:a,selectedAssetSize:d,setSelectedAssetSize:p,settingsData:f}),(0,v.jsx)(w,{assets:t,isLicensing:a,isOpen:i,labels:m,onClose:u,onLicense:n}),(0,v.jsx)(k,{isOpen:s,message:m.licensingError,onClose:l})]})};E.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var L=n(85823),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowMetadata,n=void 0===t||t,i=(0,s.useState)(null),d=i[0],p=i[1],f=(0,s.useState)(""),m=f[0],v=f[1],b=(0,s.useState)(""),g=b[0],O=b[1],y=(0,s.useState)(!1),h=y[0],_=y[1],j=(0,s.useState)(!1),w=j[0],S=j[1],P=(0,s.useState)(!1),C=P[0],k=P[1],D=(0,u.Z)(),I=D.isLicensing,x=D.licensingError,Z=D.licensingStatus,T=D.setLicensingStatus,A=D.licensingAssetsHandler,z=(0,c.U)(),U=(0,l.B)(),M=U.data,N=(0,s.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,i,s,o,c,u,l,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=void 0===n?[]:n,i=t.assetSize,s=t.metadata,o=t.pageSection,c=t.listId,v(r[0].id),u=!1,e.prev=3,e.next=6,(0,L.qP)({assets:r,assetSize:i,metadata:s,selectedAssetSize:g});case 6:return l=e.sent,e.next=9,A(l);case 9:if(d=e.sent,p=d.data,(0,L.bj)(r)&&1===r.length){e.next=15;break}return e.next=14,(0,L.tX)({assets:r,licensedContent:null===p||void 0===p||null===(f=p.meta)||void 0===f?void 0:f.licensedContent});case 14:z({assets:r,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:o,listId:c});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),u=e.t0;case 20:return v(""),u&&!w&&k(!0),e.abrupt("return",{error:u});case 23:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[w,A,z,g]),F=(0,s.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(t){var r,i,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assets,i=t.assetSize,s=t.metadata,c=t.pageSection,u=t.listId,p(r),T(""),!(!h&&(0,o.U0)(r))){e.next=7;break}return _(!0),e.abrupt("return",Promise.resolve(null));case 7:if(!(!w&&(null===M||void 0===M?void 0:M.requireMetadataForComp)&&!s)||!n){e.next=12;break}return i&&O(i),S(!0),e.abrupt("return",Promise.resolve(null));case 12:return e.abrupt("return",N({assets:r,assetSize:i,metadata:s,pageSection:c,listId:u}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,N,h,w,M,T]),B=(0,s.useMemo)((function(){return{assets:d,compLicensingHandler:F,compLicensingRequest:N,isDialogOpen:h,isDrawerOpen:w,isLicensing:I,isSnackBarOpen:C,licensingError:x,onDialogClose:function(){return _(!1)},onDrawerClose:function(){return S(!1)},onSnackbarClose:function(){return k(!1)},selectedAssetSize:g,setSelectedAssetSize:O,settingsData:M}}),[d,F,N,h,w,I,C,x,g,M]);return{assetsToLicense:d,compLicensingHandler:F,compLicensingProps:B,CompLicensingViews:E,licensingAssetId:m,licensingStatus:Z}}},85823:function(e,t,n){n.d(t,{SN:function(){return O},bj:function(){return w},qP:function(){return j},tX:function(){return y}});var r=n(59499),i=n(50029),a=n(87794),s=n.n(a),o=n(45303),c=n(357),u=n(95944),l=n(43257),d=n(16379),p=n(97708),f=n(25021),m=n(92466),v=n(8924);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,i,a,o,u,p,m,b,g,O,y,h,_,j,w,S,P,C,k,D,I,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=t.licensedContent,i=t.supplementalUrlType,a=r[0]||{},o=a.downloadUrl,u=a.contentId,p=a.contentFormat,m=a.contentSize,b=a.supplementalUrls,g=a.licenseName,null===b||void 0===b||!b.length||!i){e.next=5;break}return O=b.find((function(e){return e.type===i}))||{},y=O.url,h=void 0===y?o:y,e.abrupt("return",h);case 5:if(_=l.b5.includes(g),j=n.find((function(e){return e.id===u}))||{},w=(0,f.Tp)(j),S=(0,d.G)({assets:n,contentId:u}),P=S.filename,C=S.shouldUpdateFilename,_||!C){e.next=22;break}return e.prev=10,e.next=13,v.uS.post((0,c.u8)().formattedUrl,{data:[{media_id:j.id,media_type:w,media_size:m,media_format:p,filename:P}]});case 13:return k=e.sent,D=k.data,I=(null===D||void 0===D?void 0:D.data[0])||{},x=I.attributes,e.abrupt("return",x.url||o);case 19:return e.prev=19,e.t0=e.catch(10),e.abrupt("return",o);case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,i,a,c,u,l,p,f,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=void 0===n?[]:n,i=t.licensedContent,!((a=void 0===i?[]:i).length>1)){e.next=10;break}return c=(0,d.r)({assets:r,licensedContent:a}),u=(0,o.e)({urlParams:{filename:c.bundleFilename}}).formattedUrl,e.next=6,v.jl.post(u,c.content);case 6:return l=e.sent,p=l.data,f=p.public_url,e.abrupt("return",(0,m.A_)(f));case 10:return e.next=12,O({assets:r,licensedContent:a});case 12:return b=e.sent,e.abrupt("return",(0,m.A_)(b));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=(0,p.Fy)({asset:e});return g(g({},e),{},{assetType:t,licenseId:l._r[t]})}))},_=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.d0)(),n=t.url,e.prev=1,e.next=4,v.uS.get(n).then((function(e){return null===e||void 0===e?void 0:e.data}));case 4:return i=e.sent,e.abrupt("return",i.reduce((function(e,t){return g(g({},e),{},(0,r.Z)({},t.name,"-"))}),{}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,r,i,a,o,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.assets,r=t.assetSize,i=t.metadata,a=t.selectedAssetSize,o=i){e.next=6;break}return e.next=5,_();case 5:o=e.sent;case 6:return e.abrupt("return",{assets:h(n),licenseMetadata:o,licensingType:l.td,selectedAssetSize:r||a||"",isVideoComp:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,p.qw)({asset:e[0]||{}})===u.j0}},16379:function(e,t,n){n.d(t,{G:function(){return o},r:function(){return c}});var r=n(25021),i=n(9391),a="shutterstock",s="shutterstock_editorial",o=function(e){var t=e.assets,n=e.contentId,i=function(e){var t=e.asset;return(0,r.PD)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,r.tS)({asset:t})?{prefix:s,shouldUpdateFilename:!1}:{prefix:a,shouldUpdateFilename:!1}}({asset:t.find((function(e){return e.id===n}))||{}}),o=i.prefix,c=i.shouldUpdateFilename;return{filename:"".concat(o,"_").concat(n),shouldUpdateFilename:c}},c=function(e){var t=e.assets,n=void 0===t?[]:t,c=e.licensedContent,u=void 0===c?[]:c,l=n.every((function(e){return(0,r.tS)({asset:e})})),d=u.map((function(e){var t=e.contentId,r=e.downloadUrl,i=e.contentFormat,a=o({assets:n,contentId:t}).filename,s=r.split("/").pop().split(".").pop();return(s.length>4||s.length<2)&&(s=i),{filename:"".concat(a,".").concat(s),url:r}})),p=(0,i.zs)();return{bundleFilename:"".concat(l?s:a,"_").concat(p,".zip"),content:d}}},13807:function(e,t,n){n.d(t,{P:function(){return p},o:function(){return d}});var r=n(43267),i=n(67294),a=n(95944),s=n(81906),o=n(24366),c=n(2397),u=function(e){return e%1===0?0:2},l=function(e){var t=e.t,n=e.price;return{credit:t(["1",1].includes(n)?"credit":"credits",{PRICE:n}),unlimited:t("ent:unlimited")}},d=function(){var e=(0,o.PE)(),t=e.fullLocale,n=e.currencyData,d=(n=void 0===n?{}:n).currency,p=void 0===d?"USD":d,f=(0,r.$G)(c.Pkf).t;return(0,i.useCallback)((function(e){var n=e.price,r=e.localeCurrencyOverride,i=void 0===r?"":r,o=e.priceType,c=void 0===o?s.Br:o;return n===a.q9?l({t:f}).unlimited:c===s.vh?l({t:f,price:n}).credit:new Intl.NumberFormat(t,{style:"currency",currency:i||p,minimumFractionDigits:u(n)}).format(n)}),[p,t,f])},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Br,r=d();return r({price:e,localeCurrencyOverride:t,priceType:n})}},59611:function(e,t,n){n.d(t,{Z:function(){return Q}});var r,i=n(50029),a=n(90116),s=n(59499),o=n(87794),c=n.n(o),u=n(67294),l=n(15313),d=n(357),p=n(51741),f=n(95944),m=n(43257),v=n(24366),b=n(97708),g=n(840),O=n(68889),y=n(79138),h=n(92628),_=n(25021),j=n(8924),w=function(e){var t,n=e.assets,r=void 0===n?[]:n,i=e.user,s=function(e){var t=e.assets,n={};return t.forEach((function(e){var t=(0,_.Tp)(e),r=(0,b.JD)({assetId:e.id,assetType:t});n[r]=[].concat((0,a.Z)(n[r]?n[r]:[]),[e])})),n}({assets:r});return null===(t=Object.values(s))||void 0===t?void 0:t.map((function(e){var t=function(e){var t,n=e.assets,r=(0,_.Tp)(n[0]);return{include:"subscriptions",content_type:(0,b.JD)({assetType:r,assetId:null===(t=n[0])||void 0===t?void 0:t.id}),content_ids:n.reduce((function(e,t){return[].concat((0,a.Z)(e),[t.id.toString()])}),[]).join(",")}}({assets:e}),n=(0,d.Td)({urlParams:{licenseeIdentifier:"organization-".concat(null===i||void 0===i?void 0:i.organizationId)},queryParams:t}).formattedUrl;return j.uS.get(n)}))},S=function(e){var t=e.data,n=[];return t.map((function(e){var t=e.id.split("-"),r=t[t.length-1],i=function(e){var t=e.assetEligibility,n=t.permittedLicenses,r=t.subscriptions;return null===r||void 0===r?void 0:r.filter((function(e){var t=e.license;return n.includes(t.replace("_unlimited",""))}))}({assetEligibility:e});return n.push({assetId:r,subscriptions:i})})),n},P=n(69089),C=n(75512),k=n(98695),D=n(94428),I=n(32655),x=n(13807),E=n(69648),L=n(59453),Z=n(43267),T=n(53554),A=n.n(T),z=n(24699),U="noticeError",M=n(2397),N=n(63861),F=n(96747),B=n(89901),R=n(47765),q=new RegExp(A()),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emailCartCheckoutConfirmation,n=e.orderEmail;return t&&n?n.split(",").filter((function(e){return q.test(e)})):[]},V=function(e){var t=e.purchaseOrder;return"".concat(null===t||void 0===t?void 0:t[0]," : ").concat(null===t||void 0===t?void 0:t[1]).split(" ").map((function(e){return(0,N.k)(e)})).join(" ")},$=function(e){var t=e.t,n=e.keys,r=n.currentYear,i=n.emailAddress,a=n.purchaseOrder;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(V({purchaseOrder:a})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},H=n(2577);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=(r={},(0,s.Z)(r,m.td,d.CE),(0,s.Z)(r,m.zM,d.s0),r),J=function(e){var t=e.asset,n=e.subscriptions,r=(0,b.qw)({asset:t}),i=t.licenseId,s=t.contentTier;switch(r){case f.pX:return(0,h.I9)({assetType:f.pX,subscriptions:[].concat((0,a.Z)(null===n||void 0===n?void 0:n.videoSubscriptions),(0,a.Z)(null===n||void 0===n?void 0:n.videoCompSubscriptions)),selectedLicenseId:i});case f.xF:case f.j0:return(0,h.$L)({subscriptions:[].concat((0,a.Z)(n.musicSubscriptions),(0,a.Z)(n.musicCompSubscriptions)),licenseName:t.licenseId});case f.gP:return(0,h.$L)({subscriptions:[].concat((0,a.Z)(n.editorialImageSubscriptions),(0,a.Z)(n.editorialImageCompSubscriptions),(0,a.Z)(n.editorialVideoSubscriptions),(0,a.Z)(n.editorialVideoCompSubscriptions)),licenseName:t.licenseId,contentTier:s});case f.k4:default:return(0,h.$L)({subscriptions:[].concat((0,a.Z)(n.imageSubscriptions),(0,a.Z)(n.imageCompSubscriptions)),licenseName:t.licenseId,contentTier:s})}},Q=function(){var e=(0,L.av)().data,t=(0,u.useState)(!1),n=t[0],r=t[1],s=(0,u.useState)(""),o=s[0],d=s[1],f=(0,u.useState)({}),_=f[0],T=f[1],A=(0,E.j)().data,N=(0,l.I0)(),q=function(){var e=(0,I.yh)().analytics,t=(0,(0,D.Y)().getSearchContext)();return(0,u.useCallback)((function(n){var r=n.assets,i=void 0===r?[]:r;e.productLicensed({products:i.map((function(e){return(0,k.bR)({asset:e,shouldGetSearchContextFromAsset:!0})})),search_context:t})}),[e,t])}(),V=(0,x.o)(),K=(0,H.G)(),Q=(0,v.PE)().locale,W=function(){var e=(0,Z.$G)(M.jp5).t,t=(0,E.j)().data,n=(0,B.b)().data,r=(0,F.B)().data,i=(0,R.z)({fetchTrigger:!0})||{},s=i.name,o=i.email,c=i.phone,l=(0,v.PE)(),d=l.locale,p=l.fullLocale,f=(0,x.o)(),m=(0,u.useCallback)((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.cartTotalCurrency,l=i.filteredOrderMetadata,m=i.licenseMetadata,v=i.priceType,b=[].concat((0,a.Z)(null!==n&&void 0!==n&&n.emailCartCheckoutConfirmation?[null===t||void 0===t?void 0:t.email]:[]),(0,a.Z)(G(r)));if(!!b.length&&null!==l&&void 0!==l&&l.length){var g=$({t:e,keys:{currentYear:(new Date).getFullYear(),emailAddress:null===t||void 0===t?void 0:t.email,purchaseOrder:Object.entries(m)[0],repName:s,repPhoneNumber:c,repEmail:o}});try{var O={cartItems:l,fullName:null===t||void 0===t?void 0:t.fullName,invoiceDate:new Intl.DateTimeFormat(p).format(new Date),labels:g,licenseMetadata:m,repEmail:o,repName:s,repPhoneNumber:c,totalAmount:f({price:l.reduce((function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).price}),0),localeCurrencyOverride:u,priceType:v}),username:null===t||void 0===t?void 0:t.username};j.IZ.post((0,z.K)().formattedUrl,{emails:(0,a.Z)(new Set(b)),emailBody:O,emailSubject:"".concat(g.emailSubjectLine),language:d})}catch(S){var y,h,_,w;null===(y=window.NREUM)||void 0===y||null===(h=y.setTransactionName)||void 0===h||h.call(y,"sendOrderConfirmationEmail/".concat(U)),null===(_=window.NREUM)||void 0===_||null===(w=_.noticeError)||void 0===w||w.call(_,S,{message:"Failed sending order confirmation emails to: ".concat(b.join(", "))})}}}),[p,d,r,f,o,s,c,e,null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.fullName,null===t||void 0===t?void 0:t.username,null===n||void 0===n?void 0:n.emailCartCheckoutConfirmation]);return{sendOrderConfirmationEmails:m}}(),ee=W.sendOrderConfirmationEmails,te=(0,u.useCallback)(function(){var t=(0,i.Z)(c().mark((function t(n){var a,s,o,u,l,f,v,_,k,D,I,x,E,L,Z,z,U,M,F,B,R,G,$,H,W,te,ne,re;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.alreadyLicensedAssets,s=void 0===a?[]:a,o=n.assets,u=void 0===o?[]:o,l=n.cartMetadata,f=void 0===l?{}:l,v=n.licenseeMetadata,_=void 0===v?{}:v,k=n.isVideoComp,D=void 0!==k&&k,I=n.licenseMetadata,x=void 0===I?{}:I,E=n.licensingType,L=n.selectedAssetSize,Z=void 0===L?"":L,M=function(){var t=(0,i.Z)(c().mark((function t(){var n,r,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(w({assets:u,user:A}));case 2:return n=t.sent.map((function(e){var t=e.data;return(0,P.O)(t)})).flat(),r=S({data:n}),a=u.map(function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,a,s,o,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.qw)({asset:t}),i=t.licenseId,a=(null===r||void 0===r?void 0:r.find((function(e){return e.assetId===String(t.id)})))||{},s=a.subscriptions,o=(0,h.I9)({assetType:n,subscriptions:s,selectedLicenseId:i})||{},u=o.id,l=o.license,e.t0=Y,e.t1=Y,e.t2=Y,e.t3={},e.next=10,(0,g.Oo)({asset:t,selectedAssetSize:Z,licenseName:l,isVideoComp:D});case 10:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=Z&&y.Bg[Z]&&{comp_size:Z},e.t7=(0,e.t1)(e.t5,e.t6),e.t8={},e.t9={license_name:l,show_modal:!0,subscription_id:u},e.abrupt("return",(0,e.t0)(e.t7,e.t8,e.t9));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=7,Promise.all(a);case 7:return s=t.sent,t.abrupt("return",{licensingPayload:{content:s,license_metadata:x,required_cookies:""},orderMetadata:u.map((function(t){var n=t.currency,r=t.description,i=t.descriptionLanguageMap,a=void 0===i?{}:i,s=t.id,o=t.itemType,c=t.headline,u=t.licenseId,l=t.preview,d=void 0===l?{}:l,p=t.price,f=t.priceType,m=t.src,v=t.thumb,b=t.thumbImageUrl,g=t.title,O=t.type,y=n,h=p,_=f;if(!y||!h||!_){var j=J({asset:t,subscriptions:e}),w=j.creditCurrency,S=j.creditPrice,P=j.creditType;y=y||w,h=h||S,_=f||P}return y&&!z&&(z=y),_&&!U&&(U=_),{description:a[Q]||r,formattedPrice:V({price:h,localeCurrencyOverride:y,priceType:f}),headline:c,id:s,itemType:o,licenseId:u,licenseName:K({licenseName:u}),price:h,priceType:_,thumbnailSrc:m||b||d.url||v,title:g,type:O}}))});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,r(!0),d(""),t.next=7,M({assets:u.map((function(e){return e.mediaItem?Y(Y({},e.mediaItem),{},{licenseId:e.licenseId}):e})),isVideoComp:D,licenseMetadata:x,selectedAssetSize:Z,subscriptions:e});case 7:return R=t.sent,G=R.licensingPayload,$=R.orderMetadata,H=X[E]({urlParams:{licenseeIdentifier:"organization-".concat(null===A||void 0===A?void 0:A.organizationId)}}).formattedUrl,t.next=13,j.uS.post(H,G);case 13:return W=t.sent,q({assets:u}),N(C.L6.setLicensedAssets({assets:u,metadata:f,licensedContent:(null===(F=(0,P.O)(W.data))||void 0===F||null===(B=F.meta)||void 0===B?void 0:B.licensedContent)||[]})),u.some((function(e){var t=e.licenseId;return m.b5.includes(t)}))||(te=$.filter((function(e){return!(0,O.te)({alreadyLicensedAssets:s,asset:e})})),ee({cartTotalCurrency:z,filteredOrderMetadata:te,licenseMetadata:_,priceType:U})),d(p.MR),t.abrupt("return",W);case 22:throw t.prev=22,t.t0=t.catch(2),T(null===(ne=t.t0.response)||void 0===ne||null===(re=ne.data)||void 0===re?void 0:re.details),d(p.cM),t.t0;case 27:return t.prev=27,r(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,22,27,30]])})));return function(e){return t.apply(this,arguments)}}(),[N,K,Q,V,q,ee,A,e]);return{isLicensing:n,licensingAssetsHandler:te,licensingError:_,licensingStatus:o,setIsLicensing:r,setLicensingStatus:d}}},96747:function(e,t,n){n.d(t,{B:function(){return m}});var r=n(59499),i=n(40821),a=n(357),s=n(43257),o=n(89639),c=n(42180),u=n(8924),l=n(69089),d=n(69648);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,n=(0,d.j)(),r=n.data,p=f({target:s.dl,site_name:o.mC,setting_type:s.dl},t);return(0,i.ZP)((null===r||void 0===r?void 0:r.id)&&(null===r||void 0===r?void 0:r.organizationId)&&(0,a.nI)({queryParams:p}).formattedUrl,(function(e){return u.uS.get(e).then((function(e){return(0,l.O)(e.data)}))}),{dedupingInterval:c.yR})}}}]);